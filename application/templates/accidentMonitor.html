<!DOCTYPE html>
<html lang="en">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"> </script>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/accidentMonitor.css') }}">
    <title>EZTraffic Accident Monitor</title>
</head>
<body style = "background-color: lightblue">
    <div align="left">
        <a href="/">
            <input type="submit" value="Main Menu"/>
        </a>
    </div>
    <div align="center">
        <h1 class="title_border"> EZTraffic Accident Monitor</h1>
    </div>
    <canvas id = "chart" class="chart_border"> </canvas>
    <script style ="padding: 1000px">
        var xValues = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
        var yValues = [0, 0, 0, 0, 0, 0, 0, 0];
        var barColors = "blue"

        var chart = new Chart("chart",  {
            type: "bar",
            data: {
                labels: xValues,
                datasets: [{
                    label: "Number of accidents",
                    backgroundColor: barColors,
                    data: yValues,
                }]
            },
            options: {
                legend: {
                    display: true,
                    title: {
                        text: "Values"
                    },
                    position: "bottom"
                },
                title: {
                    display: true,
                    text: "EZTraffic Accident Monitor"
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            max: 200,
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
    function updateChart() {
        const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
        const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]
        const selectedDate = new Date(document.getElementById("dateSelector").value);
        const stateSelection = document.getElementById("state").value;
        if (selectedDate == "Invalid Date" || stateSelection == "") {
            alert("Field entry missing. Please fill in all entries required.");
            return;
        }
        console.log(selectedDate.getDay() + " " + selectedDate.getMonth());
        console.log(selectedDate);

        chart.data.datasets[0].data = [Math.floor(Math.random() * 201),
                    Math.floor(Math.random() * 201),
                    Math.floor(Math.random() * 201),
                    Math.floor(Math.random() * 201),
                    Math.floor(Math.random() * 201),
                    Math.floor(Math.random() * 201),
                    Math.floor(Math.random() * 201)];
        chart.update();
    }
    </script>
    <div align="center">
        <select id="state"> <option value="" disabled selected> Select a State </option>
            <option value="AL">Alabama</option>
            <option value="AK">Alaska</option>
            <option value="AZ">Arizona</option>
            <option value="AR">Arkansas</option>
            <option value="CA">California</option>
            <option value="CO">Colorado</option>
            <option value="CT">Connecticut</option>
            <option value="DE">Delaware</option>
            <option value="DC">District Of Columbia</option>
            <option value="FL">Florida</option>
            <option value="GA">Georgia</option>
            <option value="HI">Hawaii</option>
            <option value="ID">Idaho</option>
            <option value="IL">Illinois</option>
            <option value="IN">Indiana</option>
            <option value="IA">Iowa</option>
            <option value="KS">Kansas</option>
            <option value="KY">Kentucky</option>
            <option value="LA">Louisiana</option>
            <option value="ME">Maine</option>
            <option value="MD">Maryland</option>
            <option value="MA">Massachusetts</option>
            <option value="MI">Michigan</option>
            <option value="MN">Minnesota</option>
            <option value="MS">Mississippi</option>
            <option value="MO">Missouri</option>
            <option value="MT">Montana</option>
            <option value="NE">Nebraska</option>
            <option value="NV">Nevada</option>
            <option value="NH">New Hampshire</option>
            <option value="NJ">New Jersey</option>
            <option value="NM">New Mexico</option>
            <option value="NY">New York</option>
            <option value="NC">North Carolina</option>
            <option value="ND">North Dakota</option>
            <option value="OH">Ohio</option>
            <option value="OK">Oklahoma</option>
            <option value="OR">Oregon</option>
            <option value="PA">Pennsylvania</option>
            <option value="RI">Rhode Island</option>
            <option value="SC">South Carolina</option>
            <option value="SD">South Dakota</option>
            <option value="TN">Tennessee</option>
            <option value="TX">Texas</option>
            <option value="UT">Utah</option>
            <option value="VT">Vermont</option>
            <option value="VA">Virginia</option>
            <option value="WA">Washington</option>
            <option value="WV">West Virginia</option>
            <option value="WI">Wisconsin</option>
            <option value="WY">Wyoming</option>
        </select>

        <label for="date" class="date_Label"> Select a date: </label>
        <input id="dateSelector" name="date" class="date" type="date">
        <input class="submit" type="submit" onclick="updateChart()">
   </div>
</body>
</html>